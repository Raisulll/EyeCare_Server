INSERT INTO TRANSACTION (
  TRANSACTION_DATE,
  TRANSACTION_AMOUNT,
  PATIENT_ID,
  DOCTOR_ID
) VALUES(
  (SELECT APPOINTMENT_DATE FROM APPOINTMENT WHERE APPOINTMENT_ID = 26),
  (SELECT DOCTOR_PAYMENT FROM DOCTOR WHERE DOCTOR_ID = (SELECT DOCTOR_ID FROM APPOINTMENT WHERE APPOINTMENT_ID = 26)),
  (SELECT PATIENT_ID FROM APPOINTMENT WHERE APPOINTMENT_ID = 26),
  (SELECT DOCTOR_ID FROM APPOINTMENT WHERE APPOINTMENT_ID = 26)
);

SELECT
  DOCTOR_ID
FROM
  APPOINTMENT
WHERE
  APPOINTMENT_ID = 26;

SELECT
  *
FROM
  APPOINTMENT;

ALTER TABLE TRANSACTION RENAME COLUMN DOCTTOR_ID TO DOCTOR_ID;

SELECT
  *
FROM
  TRANSACTION;

SELECT
  *
FROM
  DOCTOR;

ALTER TABLE TRANSACTION
  ADD TRANSACTION_FOR VARCHAR(
    255
  ) DEFAULT 'Doctors fee' NOT NULL;

ALTER TABLE TRANSACTION DROP column TRANSACTION_FOR;

SELECT
  *
FROM
  TRANSACTION;


alter table TRANSACTION
  add  PAYMENT_TO VARCHAR(255) DEFAULT 'Doctors/Shop' NOT NULL;


alter table DOCTOR 
drop column HOSPITAL_ID;

alter table APPOINTMENT
add HOSPITAL_ID NUMBER DEFAULT 3 NOT NULL;


SELECT
  *
FROM
  APPOINTMENT;

ALTER TABLE PRESCRIPTION DROP COLUMN SURGERY;

alter table PRESCRIPTION add SURGERY VARCHAR(255) DEFAULT 'No';

ALTER TABLE APPOINTMENT
  ADD PRESCRIPTION_ID NUMBER;

UPDATE APPOINTMENT
SET
  APPOINTMENT_STATUS='Completed', PRESCRIPTION_ID= (SELECT PRESCRIPTION_ID FROM PRESCRIPTION WHERE APPOINTMENT_ID=26)
WHERE
  APPOINTMENT_ID=26;


  SELECT
  *
FROM
  HOSPITAL;


  alter table doctor add HOSPITAL_ID NUMBER DEFAULT 3 NOT NULL;

  DROP TABLE PRODUCT;

  DROP TABLE INVENTORY;

  DROP TABLE ORDERS;

  DROP TABLE DELIVERY;

  DROP TABLE PAYMENT;

  COMMIT;

  create table INVENTORY(
    SHOP_ID NUMBER NOT NULL,
    PRODUCT_ID NUMBER NOT NULL,
    PRODUCT_QUANTITY NUMBER NOT NULL,
    CONSTRAINT INVENTORY_PK PRIMARY KEY (SHOP_ID, PRODUCT_ID),
    CONSTRAINT INVENTORY_FK1 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID),
    CONSTRAINT INVENTORY_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
  );

  create table PRODUCT (
    PRODUCT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    PRODUCT_NAME VARCHAR(255) NOT NULL,
    PRODUCT_PRICE NUMBER NOT NULL,
    PRODUCT_DESCRIPTION VARCHAR(255) NOT NULL,
    PRODUCT_IMAGE VARCHAR(255) NOT NULL,
    CONSTRAINT PRODUCT_PK PRIMARY KEY (PRODUCT_ID)
  );

  ALTER TABLE SUPPLY DROP COLUMN PRODUCT_IMAGE;

  alter table SUPPLY add PRODUCT_IMAGE VARCHAR(255) DEFAULT 'E:\React Sikhbo\DBMS_Project\client\src\Assets\images\glass.png' NOT NULL;

  SELECT
  *
FROM
  SHOP;

  ALTER TABLE INVENTORY DROP COLUMN PRODUCT_QUANTITY;

  DROP TABLE PRODUCT;

  DROP TABLE INVENTORY;

CREATE TABLE INVENTORY(
  SHOP_ID NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  CONSTRAINT INVENTORY_PK PRIMARY KEY (SHOP_ID, PRODUCT_ID),
  CONSTRAINT INVENTORY_FK1 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID),
  CONSTRAINT INVENTORY_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID)
);

CREATE TABLE SUPPLY (
  PRODUCT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
  PRODUCT_NAME VARCHAR(255) NOT NULL,
  PRODUCT_PRICE NUMBER NOT NULL,
  PRODUCT_DESCRIPTION VARCHAR(255) NOT NULL,
  PRODUCT_IMAGE VARCHAR(255) NOT NULL,
  CONSTRAINT PRODUCT_PK PRIMARY KEY (PRODUCT_ID)
);

alter table INVENTORY add QUANTITY NUMBER DEFAULT 0 NOT NULL;


SELECT
  PRODUCT_NAME,
  PRODUCT_DESCRIPTION,
  PRODUCT_PRICE,
  QUANTITY
FROM
  SUPPLY    S,
  INVENTORY I
WHERE
  S.PRODUCT_ID = I.PRODUCT_ID;

  SELECT * FROM INVENTORY;