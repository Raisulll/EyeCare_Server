INSERT INTO TRANSACTION (
  TRANSACTION_DATE,
  TRANSACTION_AMOUNT,
  PATIENT_ID,
  DOCTOR_ID
) VALUES(
  (SELECT APPOINTMENT_DATE FROM APPOINTMENT WHERE APPOINTMENT_ID = 26),
  (SELECT DOCTOR_PAYMENT FROM DOCTOR WHERE DOCTOR_ID = (SELECT DOCTOR_ID FROM APPOINTMENT WHERE APPOINTMENT_ID = 26)),
  (SELECT PATIENT_ID FROM APPOINTMENT WHERE APPOINTMENT_ID = 26),
  (SELECT DOCTOR_ID FROM APPOINTMENT WHERE APPOINTMENT_ID = 26)
);

SELECT
  DOCTOR_ID
FROM
  APPOINTMENT
WHERE
  APPOINTMENT_ID = 26;

SELECT
  *
FROM
  APPOINTMENT;

ALTER TABLE TRANSACTION RENAME COLUMN DOCTTOR_ID TO DOCTOR_ID;

SELECT
  *
FROM
  TRANSACTION;

SELECT
  *
FROM
  DOCTOR;

ALTER TABLE TRANSACTION
  ADD TRANSACTION_FOR VARCHAR(
    255
  ) DEFAULT 'Doctors fee' NOT NULL;

ALTER TABLE TRANSACTION DROP COLUMN TRANSACTION_FOR;

SELECT
  *
FROM
  TRANSACTION;

ALTER TABLE TRANSACTION
  ADD PAYMENT_TO VARCHAR(
    255
  ) DEFAULT 'Doctors/Shop' NOT NULL;

ALTER TABLE DOCTOR DROP COLUMN HOSPITAL_ID;

ALTER TABLE APPOINTMENT
  ADD HOSPITAL_ID NUMBER DEFAULT 3 NOT NULL;

SELECT
  *
FROM
  APPOINTMENT;

ALTER TABLE PRESCRIPTION DROP COLUMN SURGERY;

ALTER TABLE PRESCRIPTION
  ADD SURGERY VARCHAR(
    255
  ) DEFAULT 'No';

ALTER TABLE APPOINTMENT
  ADD PRESCRIPTION_ID NUMBER;

UPDATE APPOINTMENT
SET
  APPOINTMENT_STATUS='Completed',
  PRESCRIPTION_ID= (
    SELECT
      PRESCRIPTION_ID
    FROM
      PRESCRIPTION
    WHERE
      APPOINTMENT_ID=26
  )
WHERE
  APPOINTMENT_ID=26;

SELECT
  *
FROM
  HOSPITAL;

ALTER TABLE DOCTOR
  ADD HOSPITAL_ID NUMBER DEFAULT 3 NOT NULL;

DROP TABLE PRODUCT;

DROP TABLE INVENTORY;

DROP TABLE ORDERS;

DROP TABLE DELIVERY;

DROP TABLE PAYMENT;

COMMIT;

CREATE TABLE INVENTORY(
  SHOP_ID NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  PRODUCT_QUANTITY NUMBER NOT NULL,
  CONSTRAINT INVENTORY_PK PRIMARY KEY (SHOP_ID, PRODUCT_ID),
  CONSTRAINT INVENTORY_FK1 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID),
  CONSTRAINT INVENTORY_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);

CREATE TABLE PRODUCT (
  PRODUCT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
  PRODUCT_NAME VARCHAR(255) NOT NULL,
  PRODUCT_PRICE NUMBER NOT NULL,
  PRODUCT_DESCRIPTION VARCHAR(255) NOT NULL,
  PRODUCT_IMAGE VARCHAR(255) NOT NULL,
  CONSTRAINT PRODUCT_PK PRIMARY KEY (PRODUCT_ID)
);

ALTER TABLE SUPPLY DROP COLUMN PRODUCT_IMAGE;

ALTER TABLE SUPPLY
  ADD PRODUCT_IMAGE VARCHAR(
    255
  ) DEFAULT 'E:\React Sikhbo\DBMS_Project\client\src\Assets\images\glass.png' NOT NULL;

SELECT
  *
FROM
  SHOP;

ALTER TABLE INVENTORY DROP COLUMN PRODUCT_QUANTITY;

DROP TABLE PRODUCT;

DROP TABLE INVENTORY;

CREATE TABLE INVENTORY(
  SHOP_ID NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  CONSTRAINT INVENTORY_PK PRIMARY KEY (SHOP_ID, PRODUCT_ID),
  CONSTRAINT INVENTORY_FK1 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID),
  CONSTRAINT INVENTORY_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID)
);

CREATE TABLE SUPPLY (
  PRODUCT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
  PRODUCT_NAME VARCHAR(255) NOT NULL,
  PRODUCT_PRICE NUMBER NOT NULL,
  PRODUCT_DESCRIPTION VARCHAR(255) NOT NULL,
  PRODUCT_IMAGE VARCHAR(255) NOT NULL,
  CONSTRAINT PRODUCT_PK PRIMARY KEY (PRODUCT_ID)
);

ALTER TABLE INVENTORY
  ADD QUANTITY NUMBER DEFAULT 0 NOT NULL;

SELECT
  PRODUCT_NAME,
  PRODUCT_DESCRIPTION,
  PRODUCT_PRICE,
  QUANTITY
FROM
  SUPPLY    S,
  INVENTORY I
WHERE
  S.PRODUCT_ID = I.PRODUCT_ID;

SELECT
  *
FROM
  INVENTORY;

CREATE TABLE CART(
  PATIENT_ID NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  SHOP_ID NUMBER NOT NULL,
  CONSTRAINT CART_PK PRIMARY KEY (PATIENT_ID, PRODUCT_ID, SHOP_ID),
  CONSTRAINT CART_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID),
  CONSTRAINT CART_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID),
  CONSTRAINT CART_FK3 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID)
);

SELECT
  *
FROM
  CART;

ALTER TABLE CART
  ADD CART_QUANTITY NUMBER DEFAULT 0 NOT NULL;

CREATE TABLE ORDERS(
  ORDER_ID NUMBER,
  PATIENT_ID NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  SHOP_ID NUMBER NOT NULL,
  ORDER_DATE DATE DEFAULT SYSDATE NOT NULL,
  ORDER_QUANTITY NUMBER NOT NULL,
  ORDER_STATUS VARCHAR(255) DEFAULT 'Confirmed' NOT NULL,
  CONSTRAINT ORDERS_PK PRIMARY KEY (ORDER_ID),
  CONSTRAINT ORDERS_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID),
  CONSTRAINT ORDERS_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID),
  CONSTRAINT ORDERS_FK3 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID)
);

CREATE TABLE DELIVERY_AGENCY(
  DELIVERY_AGENCY_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
  DELIVERY_AGENCY_NAME VARCHAR(255) NOT NULL,
  DELIVERY_AGENCY_PHONE VARCHAR(11) NOT NULL,
  DELIVERY_AGENCY_EMAIL VARCHAR(255) NOT NULL,
  DELIVERY_CHARGE NUMBER DEFAULT 0 NOT NULL,
  DELIVERY_AGENCY_DISTRICT VARCHAR(255) NOT NULL,
  DELIVERY_AGENCY_AREA VARCHAR(255) NOT NULL,
  DELIVERY_AGENCY_ROADNUMBER VARCHAR(255) NOT NULL,
  DELIVERY_AGENCY_LICENSE VARCHAR(255) NOT NULL,
  DELIVERY_AGENCY_STATUS VARCHAR(255) NOT NULL,
  DELIVERY_AGENCY_PASSWORD VARCHAR(255) NOT NULL,
  CONSTRAINT DELIVERY_AGENCY_PK PRIMARY KEY (DELIVERY_AGENCY_ID),
  CONSTRAINT DELIVERY_AGENCY_PHONE_CHECK CHECK (LENGTH(DELIVERY_AGENCY_PHONE) = 11)
);

SELECT
  *
FROM
  SHOP;

SELECT
  *
FROM
  APPOINTMENT;

ALTER TABLE ORDERS
  ADD ORDER_STATUS VARCHAR(
    255
  ) DEFAULT 'Pending' NOT NULL;

CREATE TABLE ORDERED_PRODUCTS(
  ORDER_ID NUMBER NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  SHOP_ID NUMBER NOT NULL,
  ORDER_QUANTITY NUMBER NOT NULL,
  CONSTRAINT ORDERED_PRODUCTS_PK PRIMARY KEY (ORDER_ID, PRODUCT_ID, SHOP_ID),
  CONSTRAINT ORDERED_PRODUCTS_FK1 FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID),
  CONSTRAINT ORDERED_PRODUCTS_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID),
  CONSTRAINT ORDERED_PRODUCTS_FK3 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID)
);

ALTER TABLE ORDERS DROP COLUMN PRODUCT_ID;

ALTER TABLE ORDERS DROP COLUMN SHOP_ID;

ALTER TABLE ORDERS DROP COLUMN ORDER_QUANTITY;

ALTER TABLE ORDERS
  ADD DELIVERY_AGENCY_ID NUMBER NOT NULL;

ALTER TABLE ORDERS
  ADD CONSTRAINT ORDERS_FK4 FOREIGN KEY (
    DELIVERY_AGENCY_ID
  )
    REFERENCES DELIVERY_AGENCY(
      DELIVERY_AGENCY_ID
    );

DROP TABLE ORDERED_PRODUCTS;

DROP TABLE ORDERS;

CREATE TABLE ORDERS(
  ORDER_ID VARCHAR(255) NOT NULL,
  PATIENT_ID NUMBER NOT NULL,
  ORDER_DATE DATE DEFAULT SYSDATE NOT NULL,
  ORDER_STATUS VARCHAR(255) DEFAULT 'Pending' NOT NULL,
  DELIVERY_AGENCY_ID NUMBER NOT NULL,
  CONSTRAINT ORDERS_PK PRIMARY KEY (ORDER_ID),
  CONSTRAINT ORDERS_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID),
  CONSTRAINT ORDERS_FK2 FOREIGN KEY (DELIVERY_AGENCY_ID) REFERENCES DELIVERY_AGENCY(DELIVERY_AGENCY_ID)
);

CREATE TABLE ORDERED_PRODUCTS(
  ORDER_ID VARCHAR(255) NOT NULL,
  PRODUCT_ID NUMBER NOT NULL,
  SHOP_ID NUMBER NOT NULL,
  ORDER_QUANTITY NUMBER NOT NULL,
  CONSTRAINT ORDERED_PRODUCTS_PK PRIMARY KEY (ORDER_ID, PRODUCT_ID, SHOP_ID),
  CONSTRAINT ORDERED_PRODUCTS_FK1 FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID),
  CONSTRAINT ORDERED_PRODUCTS_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID),
  CONSTRAINT ORDERED_PRODUCTS_FK3 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID)
);



SELECT
  O.ORDER_ID,
  PRODUCT_NAME,
  ORDER_QUANTITY,
  PATIENT_NAME,
  ORDER_DATE
FROM
  ORDERS           O,
  ORDERED_PRODUCTS OP,
  SUPPLY           S,
  PATIENT          P
WHERE
  O.ORDER_ID = OP.ORDER_ID
  AND OP.PRODUCT_ID = S.PRODUCT_ID
  AND O.PATIENT_ID = P.PATIENT_ID
  AND SHOP_ID = 5
  AND ORDER_STATUS = 'Pending';


  SELECT
  *
FROM
  ORDERS;


  ALTER TABLE PATIENT ADD PATIENT_IMAGE VARCHAR(255) DEFAULT 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1726489189/EyeCare/zm54mqyjywy0zegmxcyl.jpg' NOT NULL;

  ALTER TABLE PATIENT DROP COLUMN PATIENT_IMAGE;


UPDATE SUPPLY
SET
  PRODUCT_IMAGE = 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1726511594/EyeCare/wdr2njgue5veent4g54u.jpg';



  ALTER TABLE SUPPLY DROP COLUMN PRODUCT_DESCRIPTION;

  ALTER TABLE SUPPLY ADD PRODUCT_DESCRIPTION VARCHAR(4000) DEFAULT 'No Description' NOT NULL;


  ALTER TABLE PATIENT DROP COLUMN PATIENT_IMAGE;

  ALTER TABLE PATIENT ADD PATIENT_IMAGE VARCHAR(255) DEFAULT 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1727238419/EyeCare/nef8rhqyoovq7wcsodr0.jpg' NOT NULL;



  ----------------------------------NEW----------------------------------

  ALTER TABLE DOCTOR ADD DOCTOR_IMAGE VARCHAR(255) DEFAULT 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1727238419/EyeCare/nef8rhqyoovq7wcsodr0.jpg' NOT NULL;


  SELECT
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_SPECIALITY,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_IMAGE,
  HOSPITAL_NAME
FROM
  DOCTOR d, HOSPITAL h
WHERE
  d.DOCTOR_ID=22 AND
  d.HOSPITAL_ID=h.HOSPITAL_ID;


  SELECT
  A.APPOINTMENT_ID,
  A.APPOINTMENT_DATE,
  A.APPOINTMENT_TIME,
  A.APPOINTMENT_STATUS,
  D.DOCTOR_NAME,
  D.DOCTOR_SPECIALITY  H.HOSPTIAL_NAME
FROM
  APPOINTMENT A,
  DOCTOR      D,
  PATIENT     P,
  HOSPITAL    H
WHERE
  A.PATIENT_ID = P.PATIENT_ID
  AND A.DOCTOR_ID = D.DOCTOR_ID
  AND P.PATIENT_ID = 61
  AND A.APPOINTMENT_STATUS='Pending'
  AND H.HOSPITAL_ID = A.HOSPITAL_ID;



------------------prev table-------------------
CREATE TABLE ORDERS(
  ORDER_ID VARCHAR(255) NOT NULL,
  PATIENT_ID NUMBER NOT NULL,
  ORDER_DATE DATE DEFAULT SYSDATE NOT NULL,
  ORDER_STATUS VARCHAR(255) DEFAULT 'Pending' NOT NULL,
  DELIVERY_AGENCY_ID NUMBER NOT NULL,
  CONSTRAINT ORDERS_PK PRIMARY KEY (ORDER_ID),
  CONSTRAINT ORDERS_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID),
  CONSTRAINT ORDERS_FK2 FOREIGN KEY (DELIVERY_AGENCY_ID) REFERENCES DELIVERY_AGENCY(DELIVERY_AGENCY_ID)
);





------------------------------------------------------
alter table APPOINTMENT drop CONSTRAINT APPOINTMENT_FK1;

alter table APPOINTMENT drop CONSTRAINT APPOINTMENT_FK2;

alter table APPOINTMENT add CONSTRAINT APPOINTMENT_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID) ON DELETE CASCADE;

ALTER TABLE APPOINTMENT
  ADD CONSTRAINT APPOINTMENT_FK2 FOREIGN KEY (
    DOCTOR_ID
  )
    REFERENCES DOCTOR(
      DOCTOR_ID
    ) ON DELETE CASCADE;


ALTER TABLE PRESCRIPTION DROP CONSTRAINT PRESCRIPTION_FK1;

ALTER TABLE PRESCRIPTION ADD CONSTRAINT PRESCRIPTION_FK1 FOREIGN KEY (APPOINTMENT_ID) REFERENCES APPOINTMENT(APPOINTMENT_ID) ON DELETE CASCADE;


ALTER TABLE INVENTORY DROP CONSTRAINT INVENTORY_FK1;

ALTER TABLE INVENTORY ADD CONSTRAINT INVENTORY_FK1 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID) ON DELETE CASCADE;

ALTER TABLE INVENTORY ADD CONSTRAINT INVENTORY_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID) ON DELETE CASCADE;


ALTER TABLE CART DROP CONSTRAINT CART_FK1;
ALTER TABLE CART DROP CONSTRAINT CART_FK2;
ALTER TABLE CART DROP CONSTRAINT CART_FK3;

ALTER TABLE CART ADD CONSTRAINT CART_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID) ON DELETE CASCADE;

ALTER TABLE CART ADD CONSTRAINT CART_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID) ON DELETE CASCADE;

ALTER TABLE CART ADD CONSTRAINT CART_FK3 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID) ON DELETE CASCADE;


ALTER TABLE ORDERS DROP CONSTRAINT ORDERS_FK1;
ALTER TABLE ORDERS DROP CONSTRAINT ORDERS_FK2;


ALTER TABLE ORDERS ADD CONSTRAINT ORDERS_FK1 FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(PATIENT_ID) ON DELETE CASCADE;

ALTER TABLE ORDERS ADD CONSTRAINT ORDERS_FK2 FOREIGN KEY (DELIVERY_AGENCY_ID) REFERENCES DELIVERY_AGENCY(DELIVERY_AGENCY_ID) ON DELETE CASCADE;

ALTER TABLE ORDERED_PRODUCTS DROP CONSTRAINT ORDERED_PRODUCTS_FK1;
ALTER TABLE ORDERED_PRODUCTS DROP CONSTRAINT ORDERED_PRODUCTS_FK2;
ALTER TABLE ORDERED_PRODUCTS DROP CONSTRAINT ORDERED_PRODUCTS_FK3;

ALTER TABLE ORDERED_PRODUCTS ADD CONSTRAINT ORDERED_PRODUCTS_FK1 FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID) ON DELETE CASCADE;

ALTER TABLE ORDERED_PRODUCTS ADD CONSTRAINT ORDERED_PRODUCTS_FK2 FOREIGN KEY (PRODUCT_ID) REFERENCES SUPPLY(PRODUCT_ID) ON DELETE CASCADE;

ALTER TABLE ORDERED_PRODUCTS ADD CONSTRAINT ORDERED_PRODUCTS_FK3 FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID) ON DELETE CASCADE;

DELETE FROM ORDERS;


-----------------add sequence -------------------
CREATE SEQUENCE ORDER_ID_SEQ
START WITH 1
INCREMENT BY 1
MINVALUE 1
MAXVALUE 1000000
NOCYCLE;

-------------------trigger-----------------------
CREATE OR REPLACE TRIGGER ORDERS_ID_TRIGGER BEFORE
  INSERT ON ORDERS FOR EACH ROW
BEGIN
  SELECT
    'ORD'
    || TO_CHAR(ORDER_ID_SEQ.NEXTVAL, 'FM0000000') INTO :NEW.ORDER_ID
  FROM
    DUAL;
END;

SELECT
  *
FROM
  PATIENT
WHERE
  PATIENT_ID=1000;
 
----------------------------------------------------
CREATE OR REPLACE TYPE ADDRESS_TYPE AS OBJECT( PATIENT_DISTRICT VARCHAR(255), PATIENT_AREA VARCHAR(255), PATIENT_ROADNUMBER VARCHAR(255) );
ALTER TABLE PATIENT
  ADD PATIENT_ADDRESS ADDRESS_TYPE;
 
  -------------------views--------------------
/
 -------------------views--------------------
--select all docctor view
CREATE OR REPLACE VIEW DOCTOR_VIEW AS
  SELECT
    DOCTOR_ID,
    DOCTOR_NAME,
    DOCTOR_IMAGE,
    DOCTOR_SPECIALITY,
    DOCTOR_PAYMENT
  FROM
    DOCTOR;

  SELECT
  DOCTOR_ID,
  DOCTOR_NAME,
  DOCTOR_IMAGE,
  DOCTOR_SPECIALITY,
  DOCTOR_PAYMENT
FROM
  DOCTOR_VIEW;

--------------UPCOMING APPOINTMENT VIEW----------------
CREATE OR REPLACE VIEW UPCOMING_APPOINTMENT_VIEW AS
  SELECT
    A.APPOINTMENT_ID,
    A.APPOINTMENT_DATE,
    A.APPOINTMENT_TIME,
    A.APPOINTMENT_STATUS,
    A.PATIENT_ID,
    A.DOCTOR_ID,
    D.DOCTOR_NAME,
    D.DOCTOR_SPECIALITY,
    H.HOSPITAL_NAME,
    D.DOCTOR_IMAGE
  FROM
    APPOINTMENT A,
    DOCTOR      D,
    PATIENT     P,
    HOSPITAL    H
  WHERE
    A.PATIENT_ID = P.PATIENT_ID
    AND A.DOCTOR_ID = D.DOCTOR_ID
    AND A.APPOINTMENT_STATUS='Pending'
    AND H.HOSPITAL_ID = A.HOSPITAL_ID;


  SELECT
  *
FROM
  UPCOMING_APPOINTMENT_VIEW
  WHERE
  PATIENT_ID=61;


-----------------PREVIOUS APPOINTMENT VIEW----------------
CREATE OR REPLACE VIEW PREVIOUS_APPOINTMENT_VIEW AS
  SELECT
    A.APPOINTMENT_ID,
    A.APPOINTMENT_DATE,
    A.APPOINTMENT_TIME,
    A.APPOINTMENT_STATUS,
    A.PATIENT_ID,
    A.DOCTOR_ID,
    D.DOCTOR_NAME,
    D.DOCTOR_SPECIALITY,
    H.HOSPITAL_NAME,
    D.DOCTOR_IMAGE
  FROM
    APPOINTMENT A,
    DOCTOR      D,
    PATIENT     P,
    HOSPITAL    H
  WHERE
    A.PATIENT_ID = P.PATIENT_ID
    AND A.DOCTOR_ID = D.DOCTOR_ID
    AND A.APPOINTMENT_STATUS='Completed'
    AND H.HOSPITAL_ID = A.HOSPITAL_ID;



---------------------------------------------------
alter table SHOP drop column SHOP_IMAGE;
ALTER TABLE SHOP
  ADD SHOP_IMAGE VARCHAR(
    255
  ) DEFAULT 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1727614035/EyeCare/iweqwimyp0zcbbc74cro.png' NOT NULL;

  SELECT
  *
FROM
  ORDERED_PRODUCTS;


SELECT
  O.ORDER_ID,
  PRODUCT_NAME,
  ORDER_QUANTITY,
  PATIENT_NAME,
  ORDER_DATE
FROM
  ORDERS           O,
  ORDERED_PRODUCTS OP,
  SUPPLY           S,
  PATIENT          P
WHERE
  O.ORDER_ID = OP.ORDER_ID
  AND OP.PRODUCT_ID = S.PRODUCT_ID
  AND O.PATIENT_ID = P.PATIENT_ID
  AND SHOP_ID = 5
  AND ORDER_STATUS = 'Pending';

  ALTER TABLE HOSPITAL
  ADD HOSPITAL_IMAGE VARCHAR(255) DEFAULT 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1727619556/EyeCare/c8soph9rqjavtoyd0fbl.png' NOT NULL;


ALTER TABLE ORDERED_PRODUCTS ADD STATUS VARCHAR(255) DEFAULT 'Pending' NOT NULL;


SELECT
  O.ORDER_ID,
  ORDER_DATE,
  ORDER_STATUS,
  SHOP_NAME,
  PRODUCT_NAME,
  ORDER_QUANTITY
FROM
  ORDERS           O,
  ORDERED_PRODUCTS OP,
  SHOP             S,
  SUPPLY           SU
WHERE
  O.ORDER_ID = OP.ORDER_ID
  AND OP.PRODUCT_ID = SU.PRODUCT_ID
  AND OP.SHOP_ID = S.SHOP_ID
  AND O.PATIENT_ID = 61
  AND ORDER_STATUS = 'Accepted';


  SELECT
  *
FROM
  DELIVERY_AGENCY;


alter table DELIVERY_AGENCY add DELIVERY_AGENCY_IMAGE varchar(255) default 'https://res.cloudinary.com/dnn7v3kkw/image/upload/v1727634683/EyeCare/uxoercbj1e9cxwf7taku.png' not null;


alter table ORDERS add ORDER_TOTAL NUMBER DEFAULT 0 NOT NULL;

ALTER TABLE ORDERED_PRODUCTS ADD ORDER_PRICE NUMBER DEFAULT 0 NOT NULL;


SELECT
  *
FROM
  HOSPITAL;

  ----------------------------
  -- Insert Dr. Jamsed Faridi Jami
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Dr. Jamsed Faridi Jami',
  'drjamsed@gamil.com',
  '01712345678', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Banani', -- Dhaka area
  'Road 12', -- Example road number
  'Male', -- Assuming gender
  'LIC123456', -- Example license
  '5 PM - 10 PM', -- Time slot
  'Phaco, Squint & Child Eye Specialist',
  '1234' -- Password updated to 1234
);

-- Insert Dr. Bipul Kumar Sarker
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Dr. Bipul Kumar Sarker',
  'drjkumar@gamil.com',
  '01712345679', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Gulshan', -- Dhaka area
  'Road 5', -- Example road number
  'Male', -- Assuming gender
  'LIC123457', -- Example license
  '6 PM - 9 PM', -- Time slot
  'Eye Disease, Cataract, Glaucoma Specialist & Phaco Surgeon',
  '1234' -- Password updated to 1234
);

-- Insert Dr. Muhammad Moniruzzaman
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Dr. Muhammad Moniruzzaman',
  'drmuniruzzaman@gamil.com',
  '01512345670', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Dhanmondi', -- Dhaka area
  'Road 7', -- Example road number
  'Male', -- Assuming gender
  'LIC123458', -- Example license
  '4 PM - 8 PM', -- Time slot
  'Eye Specialist, Vitreo-Retina Specialist & Surgeon',
  '1234' -- Password updated to 1234
);

-- Insert Dr. Siddiqur Rahman
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Dr. Siddiqur Rahman',
  'drrahman@gamil.com',
  '01312345671', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Uttara', -- Dhaka area
  'Road 3', -- Example road number
  'Male', -- Assuming gender
  'LIC123459', -- Example license
  '3 PM - 7 PM', -- Time slot
  'Eye Specialist, Vitreo-Retina Specialist & Surgeon',
  '1234' -- Password updated to 1234
);

-- Insert Dr. Masudul Hasan
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Dr. Masudul Hasan',
  'drhasan@gamil.com',
  '01712345672', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Mirpur', -- Dhaka area
  'Road 8', -- Example road number
  'Male', -- Assuming gender
  'LIC123460', -- Example license
  '5 PM - 9 PM', -- Time slot
  'Eye Specialist, Vitreo-Retina Specialist & Surgeon',
  '1234' -- Password updated to 1234
);

-- Insert Prof. Dr. Sarwar Alam
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Prof Dr. Sarwar Alam',
  'drsarwar@gamil.com',
  '01512345673', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Mohammadpur', -- Dhaka area
  'Road 10', -- Example road number
  'Male', -- Assuming gender
  'LIC123461', -- Example license
  '6 PM - 10 PM', -- Time slot
  'Eye Specialist, Cornea & Cataract Surgeon',
  '1234' -- Password updated to 1234
);

-- Insert Prof. Dr. Md Salehuddin
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Prof Dr Md Salehuddin',
  'drsaleh@gamil.com',
  '01312345674', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Bashundhara', -- Dhaka area
  'Road 2', -- Example road number
  'Male', -- Assuming gender
  'LIC123462', -- Example license
  '5 PM - 8 PM', -- Time slot
  'Eye Specialist & Surgeon',
  '1234' -- Password updated to 1234
);

-- Insert Dr. Shovana Alam
INSERT INTO DOCTOR (
  DOCTOR_NAME,
  DOCTOR_MAIL,
  DOCTOR_PHONE,
  DOCTOR_DISTRICT,
  DOCTOR_AREA,
  DOCTOR_ROADNUMBER,
  DOCTOR_GENDER,
  DOCTOR_LICENSE,
  DOCTOR_TIMESLOT,
  DOCTOR_SPECIALITY,
  DOCTOR_PASSWORD
) VALUES (
  'Dr. Shovana Alam',
  'drshovana@gamil.com',
  '01712345675', -- Generated phone number
  'Dhaka', -- Dhaka city
  'Tejgaon', -- Dhaka area
  'Road 11', -- Example road number
  'Female', -- Assuming gender
  'LIC123463', -- Example license
  '6 PM - 9 PM', -- Time slot
  'Eye Specialist & Surgeon',
  '1234' -- Password updated to 1234
);


--------------------------------------------------
-- Insert Vision Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Vision Eye Hospital',
  'visioneye@gamil.com',
  '01742329720', -- Modified phone number
  'Dhaka', -- District
  'Green Road', -- Area
  '229', -- Road number
  'LIC-HOSP-001', -- Generated license
  '1234' -- Password
);

-- Insert Al-Noor Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Al-Noor Eye Hospital',
  'alnooreye@gamil.com',
  '01852892044', -- Modified phone number
  'Dhaka', -- District
  'Mohammadpur', -- Area
  'Noor Makka Complex', -- Road number
  'LIC-HOSP-002', -- Generated license
  '1234' -- Password
);

-- Insert Harun Eye Foundation Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Harun Eye Foundation Hospital',
  'haruneyefoundation@gamil.com',
  '01859613584', -- Modified phone number
  'Dhaka', -- District
  'Dhanmondi', -- Area
  'House-12/A, Road-05', -- Road number
  'LIC-HOSP-003', -- Generated license
  '1234' -- Password
);

-- Insert Dristi Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Dristi Eye Hospital',
  'dristieye@gamil.com',
  '01553245353', -- Modified phone number
  'Dhaka', -- District
  'Banasree', -- Area
  '48 Rd 3/A', -- Road number
  'LIC-HOSP-004', -- Generated license
  '1234' -- Password
);

-- Insert Dhaka Eye Care Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Dhaka Eye Care Hospital',
  'dhakaeyecare@gamil.com',
  '01554681955', -- Modified phone number
  'Dhaka', -- District
  'Rabindra Sarani', -- Area
  '32', -- Road number
  'LIC-HOSP-005', -- Generated license
  '1234' -- Password
);

-- Insert Bangladesh Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Bangladesh Eye Hospital',
  'bangladesheye@gamil.com',
  '01857713988', -- Modified phone number
  'Dhaka', -- District
  'Block C, Road 4', -- Area
  'House 138', -- Road number
  'LIC-HOSP-006', -- Generated license
  '1234' -- Password
);

-- Insert Lions Eye & General Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Lions Eye & General Hospital',
  'lionseye@gamil.com',
  '01854445837', -- Modified phone number
  'Dhaka', -- District
  'Begum Rokeya', -- Area
  'Prof. Abdullah Sarani', -- Road number
  'LIC-HOSP-007', -- Generated license
  '1234' -- Password
);

-- Insert Mirpur Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Mirpur Eye Hospital',
  'mirpureye@gamil.com',
  '01855650389', -- Modified phone number
  'Dhaka', -- District
  'Begum Rokeya Sarani', -- Area
  '1', -- Road number
  'LIC-HOSP-008', -- Generated license
  '1234' -- Password
);

-- Insert Dhaka Metro Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Dhaka Metro Eye Hospital',
  'dhakametroeye@gamil.com',
  '01770618312', -- Modified phone number
  'Dhaka', -- District
  'Pragati Avenue, Kuril Chowrasta', -- Area
  'ka-51', -- Road number
  'LIC-HOSP-009', -- Generated license
  '1234' -- Password
);

-- Insert Ispahani Islamia Eye Institute and Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Ispahani Islamia Eye Institute and Hospital',
  'ispahanieye@gamil.com',
  '01558144818', -- Modified phone number
  'Dhaka', -- District
  'Sher-e-Bangla Nagar', -- Area
  'Kamar Bari', -- Road number
  'LIC-HOSP-010', -- Generated license
  '1234' -- Password
);

-- Insert Dhaka New Lions Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Dhaka New Lions Eye Hospital',
  'newlionseye@gamil.com',
  '01754758462', -- Modified phone number
  'Dhaka', -- District
  'Bir Uttam Rafiqul Islam Ave', -- Area
  '1234', -- Road number
  'LIC-HOSP-011', -- Generated license
  '1234' -- Password
);

-- Insert Hikmah Eye Hospital
INSERT INTO HOSPITAL (
  HOSPITAL_NAME,
  HOSPITAL_MAIL,
  HOSPITAL_PHONE,
  HOSPITAL_DISTRICT,
  HOSPITAL_AREA,
  HOSPITAL_ROADNUMBER,
  HOSPITAL_LICENSE,
  HOSPITAL_PASSWORD
) VALUES (
  'Hikmah Eye Hospital',
  'hikmaheye@gamil.com',
  '01853719308', -- Modified phone number
  'Dhaka', -- District
  'Atish Deepankar Rd', -- Area
  '287/15', -- Road number
  'LIC-HOSP-012', -- Generated license
  '1234' -- Password
);


--------------------------------------------------
-- Insert Pharmacy 3
INSERT INTO SHOP (
  SHOP_NAME,
  SHOP_MAIL,
  SHOP_PHONE,
  SHOP_DISTRICT,
  SHOP_AREA,
  SHOP_ROADNUMBER,
  SHOP_LICENSE,
  SHOP_PASSWORD
) VALUES (
  'Health Hub Pharmacy',
  'healthhub@gamil.com',
  '01912345678', -- Modified phone number
  'Dhaka', -- District
  'Banani', -- Area
  'Road 11', -- Road number
  'LIC-PHARM-006', -- Generated license
  '1234' -- Password
);

-- Insert Optical Shop 3
INSERT INTO SHOP (
  SHOP_NAME,
  SHOP_MAIL,
  SHOP_PHONE,
  SHOP_DISTRICT,
  SHOP_AREA,
  SHOP_ROADNUMBER,
  SHOP_LICENSE,
  SHOP_PASSWORD
) VALUES (
  'Elite Optical Center',
  'eliteoptical@gamil.com',
  '01623456789', -- Modified phone number
  'Dhaka', -- District
  'Shyamoli', -- Area
  'Road 2', -- Road number
  'LIC-OPTICAL-007', -- Generated license
  '1234' -- Password
);

-- Insert Pharmacy 4
INSERT INTO SHOP (
  SHOP_NAME,
  SHOP_MAIL,
  SHOP_PHONE,
  SHOP_DISTRICT,
  SHOP_AREA,
  SHOP_ROADNUMBER,
  SHOP_LICENSE,
  SHOP_PASSWORD
) VALUES (
  'Prime Care Pharmacy',
  'primecare@gamil.com',
  '01598765432', -- Modified phone number
  'Dhaka', -- District
  'Farmgate', -- Area
  'Road 8', -- Road number
  'LIC-PHARM-008', -- Generated license
  '1234' -- Password
);

-- Insert Eye Care Shop 2
INSERT INTO SHOP (
  SHOP_NAME,
  SHOP_MAIL,
  SHOP_PHONE,
  SHOP_DISTRICT,
  SHOP_AREA,
  SHOP_ROADNUMBER,
  SHOP_LICENSE,
  SHOP_PASSWORD
) VALUES (
  'Visionary Eye Care',
  'visionaryeye@gamil.com',
  '01987654321', -- Modified phone number
  'Dhaka', -- District
  'Khilgaon', -- Area
  'Road 7', -- Road number
  'LIC-EYE-009', -- Generated license
  '1234' -- Password
);

-- Insert Optical Shop 4
INSERT INTO SHOP (
  SHOP_NAME,
  SHOP_MAIL,
  SHOP_PHONE,
  SHOP_DISTRICT,
  SHOP_AREA,
  SHOP_ROADNUMBER,
  SHOP_LICENSE,
  SHOP_PASSWORD
) VALUES (
  'Optical Solutions',
  'opticalsolutions@gamil.com',
  '01834567890', -- Modified phone number
  'Dhaka', -- District
  'Tikatuli', -- Area
  'Road 9', -- Road number
  'LIC-OPTICAL-010', -- Generated license
  '1234' -- Password
);